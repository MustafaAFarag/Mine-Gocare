<div class="rounded-lg bg-white p-6 shadow-sm">
  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="flex justify-center py-8">
    <app-loading></app-loading>
  </div>

  <div *ngIf="!isLoading">
    <!-- Wallet Balance -->
    <div class="mb-8 flex items-center gap-4">
      <div class="rounded-md bg-red-100 p-3">
        <i class="ri-wallet-3-line text-2xl text-hover-color"></i>
      </div>
      <div>
        <h3 class="font-medium text-gray-500">
          {{ "checkout.walletBalance" | translate }}
        </h3>
        <p class="text-xl font-bold text-gray-800">
          {{ getCurrency() }} {{ walletBalance.toFixed(2) }}
        </p>
      </div>
    </div>

    <!-- Transaction History Table -->
    <div class="overflow-x-auto">
      <!-- Loading Spinner for List -->
      <div *ngIf="isPaginationLoading" class="flex justify-center py-8">
        <app-loading></app-loading>
      </div>

      <table *ngIf="!isPaginationLoading" class="w-full">
        <!-- Table Header -->
        <thead>
          <tr class="border-b">
            <th class="px-4 py-4 text-left font-medium text-gray-700">
              {{ "common.date" | translate }}
            </th>
            <th class="px-4 py-4 text-left font-medium text-gray-700">
              {{ "wallet.reason" | translate }}
            </th>
            <th class="px-4 py-4 text-left font-medium text-gray-700">
              {{ "common.amount" | translate }}
            </th>
            <th class="px-4 py-4 text-left font-medium text-gray-700">
              {{ "common.description" | translate }}
            </th>
          </tr>
        </thead>

        <!-- Table Body -->
        <tbody>
          <tr
            *ngFor="let transaction of transactions"
            class="border-b hover:bg-gray-50"
          >
            <td class="px-4 py-4 text-gray-700">
              {{ transaction.transactionDate | date: "short" }}
            </td>
            <td class="px-4 py-4 text-gray-700">
              {{
                transaction.reason
                  ? transaction.reason
                  : transaction.title[currentLang]
              }}
            </td>
            <td class="px-4 py-4">
              <span
                class="rounded-md px-3 py-1 text-sm font-medium"
                [ngClass]="{
                  'bg-red-100 text-red-600': transaction.transactionType === 6,
                  'bg-green-100 text-green-600':
                    transaction.transactionType === 5 ||
                    transaction.transactionType === 16 ||
                    transaction.transactionType === 14,
                }"
              >
                {{ transaction.currency.name[currentLang] }}
                {{ transaction.transactionType === 6 ? "-" : "+" }}
                {{ transaction.amount.toFixed(2) }}
              </span>
            </td>
            <td class="px-4 py-4 text-gray-700">
              {{ transaction.description[currentLang] }}
            </td>
          </tr>

          <!-- Empty State -->
          <tr *ngIf="transactions.length === 0">
            <td colspan="4" class="py-8 text-center text-gray-500">
              <div class="flex flex-col items-center gap-2">
                <i class="ri-wallet-3-line text-4xl text-gray-400"></i>
                <p>{{ "wallet.noTransactions" | translate }}</p>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-center gap-1 border-t p-3 sm:p-4">
      <button
        (click)="previousPage()"
        id="wallet-previous-page-button"
        class="rounded-md p-1.5 text-gray-600 hover:bg-gray-100 sm:p-2"
        [disabled]="currentPage === 1 || isPaginationLoading"
        [class.opacity-50]="currentPage === 1 || isPaginationLoading"
      >
        <i class="ri-arrow-left-s-line text-lg sm:text-xl"></i>
      </button>

      <button
        *ngFor="let page of getPageNumbers()"
        (click)="goToPage(page)"
        id="wallet-page-button"
        class="flex h-8 min-w-[32px] items-center justify-center rounded-md text-sm sm:h-9 sm:min-w-[36px] sm:text-base"
        [class.bg-hover-color]="currentPage === page"
        [class.text-white]="currentPage === page"
        [class.hover:bg-gray-100]="currentPage !== page"
        [class.text-gray-700]="currentPage !== page"
        [disabled]="isPaginationLoading"
        [class.opacity-50]="isPaginationLoading"
      >
        {{ page }}
      </button>

      <button
        (click)="nextPage()"
        id="wallet-next-page-button"
        class="rounded-md p-1.5 text-gray-600 hover:bg-gray-100 sm:p-2"
        [disabled]="currentPage === totalPages || isPaginationLoading"
        [class.opacity-50]="currentPage === totalPages || isPaginationLoading"
      >
        <i class="ri-arrow-right-s-line text-lg sm:text-xl"></i>
      </button>
    </div>
  </div>
</div>
