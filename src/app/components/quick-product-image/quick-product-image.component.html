<div id="product-gallery" *ngIf="images.length > 0">
  <p-galleria
    #galleria
    [value]="images"
    [showItemNavigators]="true"
    [showThumbnailNavigators]="false"
    [responsiveOptions]="responsiveOptions"
    [circular]="true"
    [numVisible]="2"
    [containerStyle]="{ 'max-width': '640px' }"
    [showIndicators]="false"
  >
    <ng-template pTemplate="item" let-item>
      <img [src]="item.itemImageSrc" class="block w-full" [alt]="item.alt" />
    </ng-template>

    <ng-template pTemplate="thumbnail" let-item>
      <div class="thumbnail-wrapper">
        <!-- Controls thumbnail size: h-24 sets height to 6rem (96px), w-24 sets width to 6rem (96px) -->
        <img
          [src]="item.thumbnailImageSrc"
          class="block h-24 w-24 rounded-lg border-2 border-transparent object-cover transition-all hover:border-hover-color"
          [alt]="item.alt"
        />
      </div>
    </ng-template>
  </p-galleria>
</div>

<!-- Fallback in case no images are available -->
<div
  *ngIf="images.length === 0"
  class="relative flex h-64 items-center justify-center rounded-lg bg-gray-100"
>
  <img
    src="assets/default-image.png"
    alt="Default Product Image"
    class="h-full w-full rounded object-cover"
  />
</div>

<style>
  /* Navigation buttons styling */
  :host ::ng-deep .p-galleria-prev-button,
  :host ::ng-deep .p-galleria-next-button {
    background-color: gray;
  }

  :host ::ng-deep .p-galleria-prev-button:hover,
  :host ::ng-deep .p-galleria-next-button:hover {
    background-color: darkgray !important;
  }

  /* Thumbnails container styling - controls the overall thumbnails area */
  :host ::ng-deep .p-galleria-thumbnails {
    background: white !important;
    padding: 0.5rem 0; /* Controls vertical spacing of thumbnail strip */
    gap: 0.5rem; /* Controls spacing between thumbnails */
    display: flex;
    justify-content: center;
  }

  /* Thumbnail container background */
  :host ::ng-deep .p-galleria-thumbnail-container {
    background: white !important;
    padding: 0.25rem;
  }

  :host ::ng-deep .p-galleria-thumbnails-content {
    background: white !important;
    padding: 0.25rem;
  }

  :host ::ng-deep .p-galleria-thumbnail-item {
    background: rgb(229 231 235) !important; /* gray-200 */
    border-radius: 0.5rem;
    margin: 0 0.25rem; /* Controls horizontal spacing between thumbnails */
    opacity: 0.7;
    transition: all 0.3s ease;
  }

  /* Selected thumbnail state */
  :host ::ng-deep .p-galleria-thumbnail-item.p-galleria-thumbnail-item-current {
    opacity: 1;
  }

  /* Hover state for thumbnails */
  :host ::ng-deep .p-galleria-thumbnail-item:hover {
    opacity: 1;
  }

  /* Individual thumbnail wrapper - controls padding inside each thumbnail box */
  :host ::ng-deep .thumbnail-wrapper {
    padding: 0.25rem;
  }

  @media (min-width: 1024px) {
    .sticky-active {
      position: sticky;
      top: 1rem;
      z-index: 10;
      transition:
        top 0.3s ease-in-out,
        z-index 0s 0.3s;
    }
  }

  :host ::ng-deep .sticky .p-galleria {
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }
</style>
