<p-toast position="top-left" styleClass="black-text-toast"></p-toast>

<app-navbar-banner></app-navbar-banner>
<nav class="sticky top-0 z-40 w-full bg-[#fafaf2] py-8 shadow-md">
  <!-- Container for centering content with max width -->
  <div
    class="mx-auto flex w-full max-w-8xl items-center justify-between lg:px-10 2xl:px-0"
  >
    <!-- Hamburger Menu (visible on mobile, md, and lg) -->
    <div class="ml-3 flex lg:hidden">
      <button
        class="text-2xl"
        aria-label="Toggle menu"
        (click)="toggleMobileMenu()"
        id="navbar-hamburger-menu"
      >
        <i
          class="ri-menu-line"
          [ngClass]="{
            'ri-close-line': isMobileMenuOpen(),
            'ri-menu-line': !isMobileMenuOpen(),
          }"
        ></i>
      </button>
    </div>

    <!-- Logo (visible in mobile and up to lg) -->
    <div
      class="mr-5 flex flex-1 items-center justify-end gap-2 lg:order-first lg:flex-none"
    >
      <a routerLink="/" (click)="closeMobileMenu()" id="navbar-logo-link">
        <img
          src="/assets/images/settings/gocare/logo-gocare-black.svg"
          alt="Logo"
          class="mr-5 h-12 w-auto lg:mr-0 lg:h-14"
          id="navbar-logo"
        />
      </a>

      <!-- Icons for tablet screens (md to lg) -->
      <div class="hidden items-center gap-4 text-xl md:flex lg:hidden">
        <i
          class="ri-search-line cursor-pointer"
          (click)="toggleSearch()"
          id="navbar-search-icon-tablet"
        ></i>
        <div
          class="relative cursor-pointer"
          routerLink="/wishlist"
          id="navbar-wishlist-icon-tablet"
        >
          <i class="ri-heart-line"></i>
          <span
            *ngIf="wishlistCount > 0"
            class="absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full bg-hover-color text-sm text-white"
          >
            {{ wishlistCount }}
          </span>
        </div>
        <div
          class="relative cursor-pointer"
          (click)="toggleCart()"
          id="navbar-cart-icon-tablet"
        >
          <i class="ri-shopping-cart-line"></i>
          <span
            *ngIf="cartCount > 0"
            class="absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full bg-hover-color text-sm text-white"
          >
            {{ cartCount }}
          </span>
        </div>
        @if (currentUser) {
          <i
            class="ri-user-line cursor-pointer"
            routerLink="/account"
            id="navbar-user-icon-tablet"
          ></i>
          <i
            class="ri-logout-box-line cursor-pointer"
            (click)="showLogoutConfirm()"
            id="navbar-logout-icon-tablet"
          ></i>
        } @else {
          <i
            class="ri-user-line cursor-pointer"
            (click)="showDialog()"
            id="navbar-user-icon-tablet-logged-out"
          ></i>
        }
      </div>
    </div>

    <!-- Desktop Navigation (visible only on xl and up) -->
    <div class="hidden flex-1 items-center justify-end gap-6 lg:flex">
      <div>
        <ul
          class="flex font-semibold tracking-wide lg:gap-4 lg:text-[0.7rem] xl:gap-6 xl:text-[0.9rem]"
        >
          <li class="flex items-center gap-1 hover:text-hover-color">
            <a
              routerLink="/"
              routerLinkActive="text-blue-600"
              (click)="scrollToTop()"
              id="navbar-home-link-desktop"
              >{{ "navbar.home" | translate }}</a
            >
          </li>
          <li class="flex items-center gap-1 hover:text-hover-color">
            <a
              routerLink="/collections"
              routerLinkActive="text-blue-600"
              id="navbar-collections-link-desktop"
            >
              {{ "navbar.collections" | translate }}
            </a>
          </li>

          <li class="flex items-center gap-1 hover:text-hover-color">
            <a
              routerLink="/contact-us"
              routerLinkActive="text-blue-600"
              id="navbar-contact-us-link-desktop"
            >
              {{ "navbar.contactUs" | translate }}
            </a>
          </li>
          <li class="flex items-center gap-1 hover:text-hover-color">
            <a
              routerLink="/privacy-policy"
              routerLinkActive="text-blue-600"
              id="navbar-privacy-policy-link-desktop"
            >
              {{ "navbar.privacyPolicy" | translate }}
            </a>
          </li>

          <li class="flex items-center gap-1 hover:text-hover-color">
            <a
              routerLink="/refund-policy"
              routerLinkActive="text-blue-600"
              id="navbar-refund-policy-link-desktop"
            >
              {{ "navbar.refundPolicy" | translate }}
            </a>
          </li>
          <li class="flex items-center gap-1 hover:text-hover-color">
            <a
              routerLink="/terms-and-conditions"
              routerLinkActive="text-blue-600"
              id="navbar-terms-and-conditions-link-desktop"
            >
              {{ "navbar.termsAndConditions" | translate }}
            </a>
          </li>
        </ul>
      </div>

      <!-- Icons (desktop) -->
      <div class="flex items-center gap-4 text-xl xl:text-2xl">
        <i
          class="ri-search-line cursor-pointer"
          (click)="toggleSearch()"
          id="navbar-search-icon-desktop"
        ></i>
        <div
          class="relative cursor-pointer"
          routerLink="/wishlist"
          id="navbar-wishlist-icon-desktop"
        >
          <i class="ri-heart-line"></i>
          <span
            *ngIf="wishlistCount > 0"
            class="absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full bg-hover-color text-sm text-white"
          >
            {{ wishlistCount }}
          </span>
        </div>
        <div
          class="relative cursor-pointer"
          (click)="toggleCart()"
          id="navbar-cart-icon-desktop"
        >
          <i class="ri-shopping-cart-line"></i>
          <span
            *ngIf="cartCount > 0"
            class="absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full bg-hover-color text-sm text-white"
          >
            {{ cartCount }}
          </span>
        </div>
        @if (currentUser) {
          <i
            class="ri-user-line cursor-pointer"
            routerLink="/account"
            id="navbar-user-icon-desktop"
          ></i>
          <i
            class="ri-logout-box-line cursor-pointer"
            (click)="showLogoutConfirm()"
            id="navbar-logout-icon-desktop"
          ></i>
        } @else {
          <i
            class="ri-user-line cursor-pointer"
            (click)="showDialog()"
            id="navbar-user-icon-desktop-logged-out"
          ></i>
        }
      </div>
    </div>
  </div>

  <!-- Search Panel -->
  @if (isSearchOpen) {
    <app-search (closeSearch)="closeSearch()"></app-search>
  }

  <!-- Mobile Sliding Menu -->
  <div
    *ngIf="isMobileMenuOpen()"
    class="mobile-menu fixed left-0 top-0 z-30 h-full w-3/4 bg-white shadow-lg"
    [ngClass]="{
      'slide-in': isMobileMenuOpen(),
      'slide-out': !isMobileMenuOpen(),
    }"
  >
    <div class="flex flex-col px-6 py-8">
      <!-- Close Button (X) for mobile menu -->
      <button
        class="absolute right-4 top-4 text-2xl text-black"
        (click)="closeMobileMenu()"
        id="navbar-mobile-menu-close"
      >
        <i class="ri-close-line"></i>
      </button>

      <!-- Logo at the top of the sliding menu -->
      <a
        routerLink="/"
        (click)="closeMobileMenu()"
        class="mb-6"
        id="navbar-mobile-logo-link"
      >
        <img
          src="/assets/images/settings/gocare/logo-gocare-black.svg"
          alt="Logo"
          class="h-12 w-auto"
        />
      </a>

      <!-- Links on the left side -->
      <a
        routerLink="/"
        (click)="closeMobileMenu(); scrollToTop()"
        class="py-4 text-left"
        id="navbar-mobile-home-link"
        >{{ "navbar.home" | translate }}</a
      >
      <a
        routerLink="/collections"
        (click)="closeMobileMenu()"
        class="py-4 text-left"
        id="navbar-mobile-collections-link"
        >{{ "navbar.collections" | translate }}</a
      >

      <!-- Policy links (replaced dropdown) -->
      <a
        routerLink="/contact-us"
        (click)="closeMobileMenu()"
        class="py-4 text-left"
        id="navbar-mobile-contact-us-link"
      >
        {{ "navbar.contactUs" | translate }}
      </a>
      <a
        routerLink="/privacy-policy"
        (click)="closeMobileMenu()"
        class="py-4 text-left"
        id="navbar-mobile-privacy-policy-link"
      >
        {{ "navbar.privacyPolicy" | translate }}
      </a>

      <a
        routerLink="/refund-policy"
        (click)="closeMobileMenu()"
        class="py-4 text-left"
        id="navbar-mobile-refund-policy-link"
      >
        {{ "navbar.refundPolicy" | translate }}
      </a>
      <a
        routerLink="/terms-and-conditions"
        (click)="closeMobileMenu()"
        class="py-4 text-left"
        id="navbar-mobile-terms-and-conditions-link"
      >
        {{ "navbar.termsAndConditions" | translate }}
      </a>
    </div>
  </div>
</nav>

<app-auth-modal></app-auth-modal>

<app-logout-confirm-modal
  [(visible)]="logoutConfirmVisible"
  (confirmLogout)="onLogoutConfirm()"
></app-logout-confirm-modal>

<app-cart-sidebar></app-cart-sidebar>
